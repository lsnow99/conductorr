import{r as s,c as i,a as e,d as n,F as a,b as o,e as r,o as d}from"./app.2980b5d3.js";import{_ as l}from"./plugin-vue_export-helper.5a098b48.js";const c={},p=e("h1",{id:"csl-conductorr-specific-language",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#csl-conductorr-specific-language","aria-hidden":"true"},"#"),o(" CSL (Conductorr-Specific Language)")],-1),u=e("p",null,"CSL is a stripped-down Lisp implementation intended to allow users of Conductorr to extend its capabilities and finely tune release processing.",-1),h=o("The parsing capabilities are largely borrowed from "),f={href:"https://github.com/janne",target:"_blank",rel:"noopener noreferrer"},g=o("Jan Andersson"),m=o("'s "),b={href:"https://github.com/janne/go-lisp",target:"_blank",rel:"noopener noreferrer"},v=o("go-lisp"),x=o(" project."),y=r(`<p>The main differences between go-lisp and CSL are that CSL is <em>not</em> Turing-Complete, such that loops or recursion are impossible to implement. This allows us to keep the language simple and avoid the halting problem when running user-defined scripts. This means user scripts in CSL cannot contain loops or function definitions. The other main difference is that CSL has a number of predefined functions that are specifically written to aid in the processing of Newznab releases. This helps avoid the loss of functionality due to the restricted iteration and function-defining capabilities of CSL.</p><h2 id="syntax" tabindex="-1"><a class="header-anchor" href="#syntax" aria-hidden="true">#</a> Syntax</h2><p>If you are familiar with Lisp syntax, CSL follows it directly. Here is an example of a script in CSL:</p><div class="language-lisp ext-lisp line-numbers-mode"><pre class="language-lisp"><code><span class="token comment">;; Define a variable</span>
<span class="token punctuation">(</span><span class="token car">define</span> x <span class="token number">17</span><span class="token punctuation">)</span>

<span class="token comment">;; Return the result of x * 37</span>
<span class="token punctuation">(</span><span class="token car">*</span> x <span class="token number">37</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>The value <code>629</code> is returned.</p><h3 id="data-types-and-literals" tabindex="-1"><a class="header-anchor" href="#data-types-and-literals" aria-hidden="true">#</a> Data Types and Literals</h3><p>CSL has supports the following datatypes:</p><ul><li>Integers</li><li>Strings</li><li>Booleans</li><li>Lists</li></ul><h4 id="integers" tabindex="-1"><a class="header-anchor" href="#integers" aria-hidden="true">#</a> Integers</h4><p>All CSL integers are 64-bit numbers. They can be negative, positive, or zero. One special feature of CSL is the ability to use suffixes that are a shorthand to multiply by an order of magnitude. For example, <code>3G</code> is equivalent to <code>3000000000</code>.</p><p>The full list of available suffixes is below:</p><ul><li><code>G</code> --&gt; 1000000000</li><li><code>Gi</code> --&gt; 2^30</li><li><code>M</code> --&gt; 1000000</li><li><code>Mi</code> --&gt; 2^20</li><li><code>K</code> --&gt; 1000</li><li><code>Ki</code> --&gt; 2^10</li><li><code>B</code> --&gt; 8</li></ul><h4 id="strings" tabindex="-1"><a class="header-anchor" href="#strings" aria-hidden="true">#</a> Strings</h4><p>String literals must be enclosed in double quotes (<code>&quot;</code>)</p><h4 id="booleans" tabindex="-1"><a class="header-anchor" href="#booleans" aria-hidden="true">#</a> Booleans</h4><p>Boolean literals are <code>true</code> and <code>false</code>, and are case-sensitive</p><h4 id="lists" tabindex="-1"><a class="header-anchor" href="#lists" aria-hidden="true">#</a> Lists</h4><p>Lists are implicitly defined any time expressions are joined within parentheses such as <code>(1 4 &quot;hello&quot; 5 2 &quot;world&quot; true)</code>. List elements are not required to have the same data type. Single-value lists may be treated as regular values or lists. (ie, <code>(+ (1) (2))</code> is equivalent to <code>(+ 1 2)</code> and <code>(in 1 (1))</code> evaluates correctly as well).</p><h2 id="built-in-functions" tabindex="-1"><a class="header-anchor" href="#built-in-functions" aria-hidden="true">#</a> Built-In Functions</h2><ul><li><code>(+ x y ...)</code> Adds all integer arguments together</li><li><code>(- x y ...)</code> Subtracts subsequent integer arguments from the first one</li><li><code>(* x y ...)</code> Multiplies all integer arguments together</li><li><code>(/ x y ...)</code> Divides subsequent integer arguments from the first one</li><li><code>(&gt; x y ...)</code> Returns true iff <code>x</code> is strictly greater than all subsequent integer arguments</li><li><code>(&gt;&gt; x y ...)</code> Returns true iff each integer argument is strictly greater than the ones before it</li><li><code>(&lt; x y ...)</code> Returns true iff <code>x</code> is strictly less than all subsequent integer arguments</li><li><code>(&lt;&lt; x y ...)</code> Returns true iff each integer argument is strictly less than the ones before it</li><li><code>(&gt;= x y ...)</code> Returns true iff <code>x</code> is greater than or equal to all subsequent integer arguments</li><li><code>(&gt;&gt;= x y ...)</code> Returns true iff each integer argument is strictly greater than or equal to the ones before it</li><li><code>(&lt;= x y ...)</code> Returns true iff <code>x</code> is less than or equal to all subsequent integer arguments</li><li><code>(&lt;&lt;= x y ...)</code> Returns true iff each integer argument is strictly less than or equal to the ones before it</li><li><code>(&gt;&lt; x y v ...)</code> Returns true iff for all integer arguments <code>v</code> that <code>v</code> \u2208 (<code>x</code>, <code>y</code>)</li><li><code>(&gt;&lt;= x y v ...)</code> Returns true iff for all integer arguments <code>v</code> that <code>v</code> \u2208 (<code>x</code>, <code>y</code>]</li><li><code>(&gt;=&lt; x y v ...)</code> Returns true iff for all integer arguments <code>v</code> that <code>v</code> \u2208 [<code>x</code>, <code>y</code>)</li><li><code>(&gt;=&lt;= x y v ...)</code> Returns true iff for all integer arguments <code>v</code> that <code>v</code> \u2208 [<code>x</code>, <code>y</code>]</li><li><code>(&lt;&gt; x y v ...)</code> Returns true iff for all integer arguments <code>v</code> that <code>v</code> \u2208 [-2<sup>63</sup>, x)\u2229(<code>y</code>, 2<sup>63</sup>-1]</li><li><code>(&lt;=&gt;= x y v ...)</code> Returns true iff for all integer arguments <code>v</code> that <code>v</code> \u2208 [-2<sup>63</sup>, <code>x</code>]\u2229[<code>y</code>, 2<sup>63</sup>-1]</li><li><code>(&lt;=&gt; x y v ...)</code> Returns true iff for all integer arguments <code>v</code> that <code>v</code> \u2208 [-2<sup>63</sup>, <code>x</code>]\u2229(<code>y</code>, 2<sup>63</sup>-1]</li><li><code>(&lt;&gt;= x y v ...)</code> Returns true iff for all integer arguments <code>v</code> that <code>v</code> \u2208 [-2<sup>63</sup>, <code>x</code>)\u2229[<code>y</code>, 2<sup>63</sup>-1]</li><li><code>(eq x y ...)</code> Returns true if all arguments are equal to each other in both type and value. In the case of lists, the elements must be in the same order to be considered equal. (Under the hood we are just using Go&#39;s <code>reflect.DeepEqual</code>)</li><li><code>(define x expr)</code> Defines a variable <code>x</code> initialized with the result of <code>expr</code></li><li><code>(in v l)</code> Returns true if the value of <code>v</code> appears in list <code>l</code></li><li><code>(in s1 s2)</code> Returns true iff <code>s1</code> is a substring of <code>s2</code></li><li><code>(nth i l)</code> Returns the <code>i</code>th value in list <code>l</code> or error if out of bounds</li><li><code>(nths i s)</code> Returns the <code>i</code>th character in the string <code>s</code></li><li><code>(len l)</code> Returns the length of list <code>l</code></li><li><code>(lens s)</code> Returns the length of string <code>s</code></li><li><code>(append l v ...)</code> Appends <code>v</code> and all subsequent arguments in order to the right end of list <code>l</code>. If the list <code>l</code> does not yet exist, then it is initialized</li><li><code>(appendleft l v ...)</code> Appends <code>v</code> and all subsequent arguments in order to the left end of list <code>l</code>. If the list <code>l</code> does not yet exist, then it is initialized</li><li><code>(pop l ...)</code> Removes the rightmost element in list <code>l</code>, returning the removed element</li><li><code>(popleft l ...)</code> Removes the leftmost element in list <code>l</code>, returning the removed element</li><li><code>(if p expr1 expr2)</code> Returns the result of <code>expr1</code> if <code>p</code> evaluates to <code>true</code>, and returns the result of <code>expr2</code> otherwise</li><li><code>(and p ...)</code> Returns the result of a conditional AND applied to all operands in the expression. Returns <code>true</code> if there is only one operand</li><li><code>(or p ...)</code> Returns the result of a conditional OR applied to all operands in the expression. Returns <code>true</code> if there is only one operand</li><li><code>(not p)</code> Returns the result of conditional inverse applied to p</li><li><code>(join s v ...)</code> Joins elements elements <code>v1</code>, <code>v2</code>, ... into a string using separator <code>s</code>. Does not add a separator to the end of the resultant string. Non-string elements such as integers will display using <code>fmt.Sprintf(%v, v)</code></li><li><code>(split s d)</code> Splits a string into a list of strings using delimiter <code>d</code></li></ul><blockquote><p>NOTE: All of the above functions are evaluated <em>eagerly</em>, meaning their arguments are evaluated before the function is called. The exceptions to this are the <code>if</code>, <code>append</code>, <code>appendleft</code>, <code>pop</code>, and <code>popleft</code> functions, which only evaluate their arguments as they are needed.</p></blockquote><h2 id="extension-functions" tabindex="-1"><a class="header-anchor" href="#extension-functions" aria-hidden="true">#</a> Extension Functions</h2><p>Conductorr extends the base CSL specification with functions specific to its own functionality for processing releases.</p><p>A <code>release</code> type is just a list defined like so:</p><div class="language-lisp ext-lisp line-numbers-mode"><pre class="language-lisp"><code><span class="token punctuation">(</span><span class="token car">define</span> a
  <span class="token punctuation">(</span>
    <span class="token string">&quot;Manos.The.Hands.of.Fate.1966.THEATRi<span class="token argument">CAL</span>.1080p.BluRay.x264-SADPANDA&quot;</span> 
    <span class="token string">&quot;TorrentLeech&quot;</span> 
    <span class="token string">&quot;torrent&quot;</span> 
    <span class="token string">&quot;movie&quot;</span> 
    <span class="token string">&quot;BDRip&quot;</span> 
    <span class="token string">&quot;1080p&quot;</span> 
    <span class="token string">&quot;x264&quot;</span> 
    <span class="token number">32</span> 
    <span class="token number">794</span> 
    <span class="token number">10737418240</span> 
    <span class="token number">288</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">)</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>The properties are in order: Release title, indexer, download type (either torrent or nzb), content type (either movie or series), rip type, resolution, encoding, number of seeders, age in days, size in bytes, and runtime in minutes.</p><p>Possible values for rip type are <code>CAM</code>, <code>TELESYNC</code>, <code>SCR</code>, <code>HDTV</code>, <code>DVDRip</code>, <code>HDRip</code>,<code>WEBCap</code>, <code>WEBRip</code>, <code>WEBDL</code>, <code>BDRip</code>.</p><p>Possible values for resolution are <code>352p</code>, <code>360p</code>, <code>480i</code>, <code>480p</code>, <code>576i</code>, <code>576p</code>, <code>720p</code>, <code>1080p</code>, <code>2160p</code></p><p>Possible values for encoding are <code>Xvid</code>, <code>x264</code>, <code>x265</code>, <code>VP9</code></p><p>The following functions are defined on <code>release</code> types:</p><ul><li><code>r-title</code> Retrieves release title</li><li><code>r-indexer</code> Retrieves release indexer</li><li><code>r-downloadtype</code> Retrieves release download type</li><li><code>r-contenttype</code> Retrieves release content type</li><li><code>r-riptype</code> Retrieves release rip type</li><li><code>r-resolution</code> Retrieves release resolution</li><li><code>r-encoding</code> Retrieves release encoding</li><li><code>r-seeders</code> Retrieves number of seeders for release</li><li><code>r-age</code> Retrieves age in days for release</li><li><code>r-size</code> Retrieves size of release in bytes</li><li><code>r-runtime</code> Retrieves the runtime of the release in minutes</li><li><code>r-riptype-order</code> Returns a number designating the order of how preferrable a riptype is (<code>CAM &lt; TELESYNC &lt; SCR &lt; HDTV &lt; DVDRip &lt; HDRip &lt; WEBCap &lt; WEBRip &lt; WEBDL &lt; BDRip</code>)</li><li><code>r-resolution-order</code> Returns a number designating the order of how preferrable a resolution is (<code>352p &lt; 360p &lt; 480i &lt; 480p &lt; 576i &lt; 576p &lt; 720p &lt; 1080p &lt; 2160p</code>)</li><li><code>r-encoding-order</code> Returns a number designating the order of how preferrable an encodign is (<code>Xvid &lt; x264 &lt; x265 &lt; VP9</code>)</li></ul><p>To call use one of these functions, do the following:</p><p><code>(r-title a)</code> where <code>a</code> is a release as defined above</p><p>The above snippet returns &quot;Manos.The.Hands.of.Fate.1966.THEATRiCAL.1080p.BluRay.x264-SADPANDA&quot; when <code>a</code> is defined like in the earlier example</p>`,34);function R(q,k){const t=s("OutboundLink");return d(),i(a,null,[p,u,e("p",null,[h,e("a",f,[g,n(t)]),m,e("a",b,[v,n(t)]),x]),y],64)}var L=l(c,[["render",R]]);export{L as default};
